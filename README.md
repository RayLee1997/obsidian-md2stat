# Markdown to Stat

一键将 Obsidian 笔记转换为微信公众号格式的插件，同时还提供了导出为高清图片的功能。

## 功能特点

- 📝 一键将 Markdown 文档转换为微信公众号格式
- 🎨 提供多种精美模板，支持自定义字体和字号
- 🖼️ 支持自定义背景和样式
- 🔄 实时预览编辑效果
- 📋 一键复制到剪贴板，直接粘贴到公众号

- 📥 **新功能**：一键导出为高清 PNG/JPEG 图片
- 🎯 **新功能**：Mermaid 流程图自动转换为图片，完美兼容公众号

## 使用方法

1. 打开任意 Markdown 文档
2. 点击侧边栏的公众号图标打开预览面板
3. 选择喜欢的模板和字体
4. 调整字号大小以适应内容
5. 实时预览编辑效果
6. 点击【复制到公众号】按钮
7. 直接粘贴到微信公众号编辑器中

## 安装方法

### 从 Obsidian 社区插件安装（推荐）

1. 打开 Obsidian 设置
2. 转到第三方插件设置
3. 关闭安全模式
4. 点击浏览社区插件
5. 搜索 "Markdown to Stat"
6. 点击安装并启用插件

### 手动安装

1. 下载最新版本的 release 文件：<https://github.com/RayLee1997/obsidian-md2stat/releases>
2. 将下载的压缩包解压到 Obsidian 库的 `.obsidian/plugins` 目录下
3. 在 Obsidian 设置中启用插件

## 使用技巧

- 调整字号大小以获得最佳阅读体验
- 不同模板适合不同类型的文章，可以根据内容选择合适的模板
- 复制前可以预览最终效果，确保格式正确
- 支持代码块、表格、图片等 Markdown 元素
- **Mermaid 图表**：支持所有 Mermaid 类型（流程图、序列图、类图等），自动转换为高清图片
- **导出图片**：点击底部"导出图片"按钮可将整篇文章导出为 PNG 图片（2x 高清）

## 高级功能

### 📸 图片导出

点击底部工具栏的 **"导出图片"** 按钮，可将当前预览的文章导出为高清 PNG 图片：

- ✅ 2倍像素密度（Retina 高清）
- ✅ 完整内容导出（非仅可见区域）
- ✅ 自动生成带时间戳的文件名
- ✅ 支持 PNG 和 JPEG 格式

### 🎨 Mermaid 图表支持

插件自动识别 Mermaid 代码块并转换为图片，完美解决公众号不支持 SVG 的问题：

**示例：**

\`\`\`mermaid
%%{init: { 'theme':'base', 'themeVariables': { 'fontSize':'12px' }}}%%
graph LR
    A[开始] --> B{判断}
    B -->|是| C[执行]
    B -->|否| D[结束]

    style A fill:#FFD700
    style C fill:#90EE90
\`\`\`

**特性：**

- ✅ 自动转换为高清 PNG 图片
- ✅ 完美保留自定义样式（颜色、字体等）
- ✅ 公众号直接粘贴可用
- ✅ 支持所有 Mermaid 图表类型（flowchart、sequence、class、state 等）

## 更新日志

### v2.0.1 (2026-02-07)

**✨ 新增功能**

- Mermaid 图表等待渲染机制：解决主题切换后图表显示问题
- 布局优化：工具栏与预览区域顶部对齐

**🔧 改进**

- 主题/字体切换时完整重新渲染 Mermaid 图表
- 调整工具栏边距：顶部 0px, 左侧 0px，与左侧窗口对齐
- 按钮名称统一为 "Markdown to Stat"

**🗑️ 移除**

- 移除实时预览锁定功能（简化 UI，始终启用 500ms 防抖刷新）

### v2.0.0 (2026-02-06)

**🎯 主要功能**

- PNG/JPEG 高清图片导出（2x DPI）
- Mermaid 图表自动转换为图片
- 完美兼容微信公众号

## 支持的语言

插件界面目前支持：

- 简体中文
